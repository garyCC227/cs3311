<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0059)https://cgi.cse.unsw.edu.au/~cs3311/19s1/pracs/05/index.php -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>COMP3311 19s1 - Prac Exercise 05</title>
<link rel="stylesheet" type="text/css" href="./19s1 - Prac Exercise 05_files/course.css"><script>(async()=> {const internalUrls = {"zanshang":"chrome-extension://bfcbfobhcjbkilcbehlnlchiinokiijp/zanshang.png"};const manifest = {"background":{"scripts":["lib.js","bg.js"]},"browser_action":{"default_popup":"popup.html","default_title":"B站下载助手"},"content_scripts":[{"all_frames":true,"js":["lib.js"],"matches":["http://*/*","https://*/*"]},{"all_frames":false,"js":["cs.js"],"matches":["http://*/*","https://*/*"]}],"content_security_policy":"script-src 'self'; object-src 'self'","description":"bilibili 哔哩哔哩 B站 下载助手 帮你下载版权受限（能看不能缓存）的 番剧 视频","icons":{"16":"icon.png","48":"icon.png","128":"icon.png"},"key":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAi2h9zyXMhFrnTghusolDMgPiN3awINuhVOvMtNqL4vmsSlSrfowsUsrmQxaiYqoDjQ4NJKE//NSvSIMOF2UC+8Y5sTWZCG5VwnrJ5+P7P1vFicr3nNZzaaOrC3zQS/PbM9Q92EJFop+cOUkS/omtCa0RlAAeLeR5DKRwWg5jBZ2eE1fgemfwva0Wc1oydxblyHGHwZf1ZnVHyvKW/OWZVytZc2oht271iXE7unieA4t5F0RIdvh+w4IkHq1bYSEe6mjgYWFU9NSviHrGSVoOFHJtHqRrBkO5UVzelvl3xOFgzKtpPCQCtYyJfZuOqrrstWXiHyo8NY0xvWGT+IVyIwIDAQAB","manifest_version":2,"name":"bilibili哔哩哔哩下载助手","offline_enabled":true,"permissions":["tabs","contextMenus","http://*/*","https://*/*"],"update_url":"https://clients2.google.com/service/update2/crx","version":"2.0.9","web_accessible_resources":["*.*","**/*.*"]};const e=()=>"www.bilibili.com"===location.hostname||"bilibili.com"===location.hostname;if(!e())return;const t=()=>/\/video\/av\d+/i.test(window.location.pathname),n=()=>/\/bangumi\/play\/\S+/i.test(window.location.pathname);if(!t()&&!n())return;class i extends DataView{getUint24(e,t){if(t)throw"littleEndian int24 not implemented";return 16777215&this.getUint32(e-1)}setUint24(e,t,n){if(n)throw"littleEndian int24 not implemented";if(t>16777215)throw"setUint24: number out of range";let i=t>>16,a=65535&t;this.setUint8(e,i),this.setUint16(e+1,a)}indexOf(e,t=0,n=this.byteLength-e.length+1){if(e.charCodeAt){for(let i=t;i<n;i++){if(this.getUint8(i)!=e.charCodeAt(0))continue;let t=1;for(let n=0;n<e.length;n++)if(this.getUint8(i+n)!=e.charCodeAt(n)){t=0;break}if(t)return i}return-1}for(let i=t;i<n;i++){if(this.getUint8(i)!=e[0])continue;let t=1;for(let n=0;n<e.length;n++)if(this.getUint8(i+n)!=e[n]){t=0;break}if(t)return i}return-1}}class a{constructor(e,t=0){this.tagHeader=new i(e.buffer,e.byteOffset+t,11),this.tagData=new i(e.buffer,e.byteOffset+t+11,this.dataSize),this.previousSize=new i(e.buffer,e.byteOffset+t+11+this.dataSize,4)}get tagType(){return this.tagHeader.getUint8(0)}get dataSize(){return this.tagHeader.getUint24(1)}get timestamp(){return this.tagHeader.getUint24(4)}get timestampExtension(){return this.tagHeader.getUint8(7)}get streamID(){return this.tagHeader.getUint24(8)}stripKeyframesScriptData(){let e;if(18!=this.tagType)throw"can not strip non-scriptdata's keyframes";-1!=(e=this.tagData.indexOf("hasKeyframes"))&&this.tagData.setUint8(e+"hasKeyframes".length,0)}getDuration(){if(18!=this.tagType)throw"can not find non-scriptdata's duration";let e=this.tagData.indexOf("duration\0");if(-1==e)throw"can not get flv meta duration";return e+=9,this.tagData.getFloat64(e)}getDurationAndView(){if(18!=this.tagType)throw"can not find non-scriptdata's duration";let e=this.tagData.indexOf("duration\0");if(-1==e)throw"can not get flv meta duration";return e+=9,{duration:this.tagData.getFloat64(e),durationDataView:new i(this.tagData.buffer,this.tagData.byteOffset+e,8)}}getCombinedTimestamp(){return this.timestampExtension<<24|this.timestamp}setCombinedTimestamp(e){if(e<0)throw"timestamp < 0";this.tagHeader.setUint8(7,e>>24),this.tagHeader.setUint24(4,16777215&e)}}class o{constructor(e){if(0!=e.indexOf("FLV",0,1))throw"Invalid FLV header";this.header=new i(e.buffer,e.byteOffset,9),this.firstPreviousTagSize=new i(e.buffer,e.byteOffset+9,4),this.tags=[];let t=this.headerLength+4;for(;t<e.byteLength;){let n=new a(e,t);t+=11+n.dataSize+4,this.tags.push(n)}if(t!=e.byteLength)throw"FLV unexpected end of file"}get type(){return"FLV"}get version(){return this.header.getUint8(3)}get typeFlag(){return this.header.getUint8(4)}get headerLength(){return this.header.getUint32(5)}static merge(e){if(e.length<1)throw"Usage: FLV.merge([flvs])";let t,n=[],i=[0,0],a=[0,0],o=0;n.push(e[0].header),n.push(e[0].firstPreviousTagSize);for(let s of e){let r=1e3*o;i[0]=a[0],i[1]=a[1],r=Math.max(r,i[0],i[1]);let l=0;for(let i of s.tags)18!=i.tagType||l?8!=i.tagType&&9!=i.tagType||(a[i.tagType-8]=r+i.getCombinedTimestamp(),i.setCombinedTimestamp(a[i.tagType-8]),n.push(i.tagHeader),n.push(i.tagData),n.push(i.previousSize)):(o+=i.getDuration(),l=1,s==e[0]&&(({duration:o,durationDataView:t}=i.getDurationAndView()),i.stripKeyframesScriptData(),n.push(i.tagHeader),n.push(i.tagData),n.push(i.previousSize)))}return t.setFloat64(0,o),new Blob(n)}static async mergeBlobs(e){if(e.length<1)throw"Usage: FLV.mergeBlobs([blobs])";let t,n=[],a=[0,0],s=[0,0],r=0;for(let l of e){let d=1e3*r;a[0]=s[0],a[1]=s[1],d=Math.max(d,a[0],a[1]);let c=0,g=await new Promise((e,t)=>{let n=new FileReader;n.onload=(()=>e(new o(new i(n.result)))),n.readAsArrayBuffer(l),n.onerror=t}),p=[];for(let i of g.tags)18!=i.tagType||c?8!=i.tagType&&9!=i.tagType||(s[i.tagType-8]=d+i.getCombinedTimestamp(),i.setCombinedTimestamp(s[i.tagType-8]),p.push(i.tagHeader,i.tagData,i.previousSize)):(r+=i.getDuration(),c=1,l==e[0]&&(n.push(g.header,g.firstPreviousTagSize),({duration:r,durationDataView:t}=i.getDurationAndView()),i.stripKeyframesScriptData(),n.push(i.tagHeader),n.push(i.tagData),n.push(i.previousSize)));n.push(new Blob(p))}return t.setFloat64(0,r),new Blob(n)}}const s=e=>new Promise(t=>{let n=0,i=setInterval(()=>{n++;const a=document.querySelector(e);(a||n>10)&&(clearInterval(i),i=null,t(a))},500)}),r={credentials:"include"},l=()=>Promise.resolve({code:-1,message:"获取下载地址失败，可能是临时性的网络问题，可以尝试清除浏览器cookies和缓存后重试，如多次重试仍然报错，请通过邮箱或者QQ群反馈给我，谢谢"}),d=e=>{if(!e.durl)return-10403===e.code?(e.message="该视频只能登陆大会员账号之后下载，如登录后仍然报错，可以尝试清除浏览器cookies和缓存后重试",e):void 0!==e.code?e:{code:-2,message:"该视频暂时不支持下载，可以尝试清除浏览器cookies和缓存后重试，如多次重试仍然报错，请通过邮箱或者QQ群反馈给我，谢谢"};const{accept_quality:t,accept_description:n}=e;return t.forEach((e,t)=>{c[e]=n[t]}),{code:0,durls:e.durl.map(e=>{const t=new URL(e.url);return t.protocol=window.location.protocol,{url:t.href,size:e.size}}),qualityDescription:c[e.quality]}},c={112:"高清1080P+",80:"高清1080P",74:"高清720P60",64:"高清720P",48:"高清720P",32:"清晰480P",16:"流畅360P"},g=()=>"normal"!==localStorage.bilibili_helper_download_mode,p=()=>"off"!==localStorage.bilibili_helper_merge_mode,h=()=>"hide"===localStorage.bilibili_helper_show,m=e=>{const t=1073741824,n=1048576;return e>=t?`${(e/t).toFixed(2)}GB`:e>=n?`${(e/n).toFixed(2)}MB`:e>=1024?`${(e/1024).toFixed(2)}KB`:e+"B"},u=(e,t,n,i)=>0!==n?`<strong>${i}</strong>`:`<strong>${e}</strong> 的下载地址(共${t.length}个分段)：`,f=(e,t,n,i)=>{if(0!==n)return"";if(!g())return e.map((e,n)=>`\n        <li><a title="${t}_分段${n+1}" download href="${e.url}">分段${n+1}</a><span class="size">(${m(e.size)})</span></li>\n      `).join("");if(g()&&!p())return e.map((e,n)=>{const i=encodeURIComponent(JSON.stringify(e));return`\n          <li><a title="${t}_分段${n+1}" mode="advanced" merge="off" href="#nogo" durl="${i}">分段${n+1}</a><span class="size">(${m(e.size)})</span><span durl="${i}" class="progress"></span></li>\n        `}).join("");if(g()&&p()){const n=encodeURIComponent(JSON.stringify(e));let i=0;return e.forEach(e=>i+=e.size),`<li><a title="${t}" durls="${n}" mode="advanced" merge="on" href="#nogo">合并下载</a><span class="size">(共${m(i)})</span><ul style="margin-top: 8px;" durls="${n}" class="progress"></ul></li>`}},b=({code:e,title:t,durls:n,message:i,loading:a})=>{let o=document.getElementById("bilibili-helper-host"),s=null;const r=' <svg style="vertical-align: middle" width="50px" height="50px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-pacman"><g ng-attr-style="display:{{config.showBean}}" style="display:block"><circle cx="62.0973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="-0.67s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="-0.67s" repeatCount="indefinite"></animate></circle><circle cx="82.4973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="-0.33s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="-0.33s" repeatCount="indefinite"></animate></circle><circle cx="42.2973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="0s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="0s" repeatCount="indefinite"></animate></circle></g><g ng-attr-transform="translate({{config.showBeanOffset}} 0)" transform="translate(-15 0)"><path d="M50 50L20 50A30 30 0 0 0 80 50Z" ng-attr-fill="{{config.c1}}" fill="#f45a8d" transform="rotate(10.946 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;45 50 50;0 50 50" keyTimes="0;0.5;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></path><path d="M50 50L20 50A30 30 0 0 1 80 50Z" ng-attr-fill="{{config.c1}}" fill="#f45a8d" transform="rotate(-10.946 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;-45 50 50;0 50 50" keyTimes="0;0.5;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></path></g></svg>';o?((s=o.shadowRoot).getElementById("title").innerHTML=a?"加载中"+r:u(t,n,e,i),s.getElementById("durls").innerHTML=a?"":f(n,t,e)):((o=document.createElement("bilibili-helper-host")).id="bilibili-helper-host",o.style.cssText=`display:block;overflow:auto;position:fixed;z-index:${Number.MAX_SAFE_INTEGER};bottom:0;left:0;right:0;max-height:50%;width:100%;background: #fff;border-top: 1px solid #ccc;box-shadow: rgba(0, 0, 0, 0.2) 0 -5px 10px;`,h()?o.classList.add("hide"):o.classList.remove("hide"),o.innerHTML="<style>\n        #bilibili-helper-host.hide{\n          width:auto!important;\n          left:auto!important;\n          background:transparent!important;\n          border:0 none!important;\n          border-radius: 6px 0 0 0;\n          box-shadow: rgba(0, 0, 0, 0.2) -5px -5px 10px!important;\n        }\n        .player-fullscreen-fix #bilibili-helper-host {\n          z-index: 99999!important;\n        }\n      </style>",document.body.appendChild(o),(s=o.attachShadow({mode:"open"})).innerHTML=`\n        <style>\n          p, a, div, span, li, i, b, strong, input, button, label {\n            font-size: inherit;\n          }\n          li {\n            margin-bottom: 5px;\n          }\n          p {\n            margin: 0;\n            line-height: 1.5;\n          }\n          h1 {\n            font-size: 20px;\n            font-weight: bold;\n            margin-bottom: 20px;\n          }\n          h3 {\n            font-size: 16px;\n            margin: 1em 0;\n          }\n          #title {\n            font-size: 16px;\n            font-weight: normal;\n          }\n          #content {\n            display: flex;\n            width: 100%;\n            font-size: 14px;\n            position: relative;\n          }\n          a {\n            color: #00a1d6 !important;\n            text-decoration: none;\n          }\n          a:hover {\n            text-decoration: underline;\n          }\n          a.disabled {\n            color: #666!important;\n          }\n          a.disabled:hover {\n            text-decoration: none;\n            cursor: not-allowed;\n          }\n          #side-bar {\n            flex: 3;\n            padding: 20px;\n            border-right: 1px solid #ccc;\n            margin-right: -1px;\n          }\n          #main {\n            flex: 7;\n            padding: 20px;\n            border-left: 1px solid #ccc;\n          }\n          #notice-frame {\n            width: 100%;\n            padding: 0;\n          }\n          .donate {\n            border-top: 1px solid #ccc;\n            padding-top: 10px;\n          }\n          #zanshang {\n            width: 80%;\n          }\n          .setting-item {\n            margin-bottom: 8px;\n          }\n          .setting-item .label {\n            font-weight: bold;\n            width: 6em;\n            display: inline-block;\n            text-align: right;\n          }\n          .desc {\n            padding-left: 6em;\n          }\n          #actions {\n            position: absolute;\n            right: 0;\n            top: 0;\n          }\n          .btn-large {\n            border: 0 none;\n            background: #f45a8d;\n            border-radius: 6px;\n            color: #fff;\n            padding: 10px 20px;\n          }\n          #toggle {\n            border-radius: 0 0 0 6px;\n            outline: none;\n            cursor: pointer;\n          }\n          .hide #side-bar {\n            display: none;\n          }\n          .hide #main {\n            display: none;\n          }\n          .hide #toggle {\n            border-radius: 6px 0 0 0;\n          }\n          .hide #actions {\n            position: static;\n          }\n      \n          a.btn {\n            border: 0 none;\n            background: #f45a8d;\n            text-decoration: none !important;\n            color: #fff !important;\n            border-radius: 3px;\n            padding: 5px 10px;\n            display: inline-block;\n          }\n          .settings {\n            border-left: 5px solid #ccc;\n            background: #eee;\n            padding: 16px 16px 8px 0;\n          }\n          .size {\n            margin: 0 5px;\n          }\n        </style>\n        <div id="content" ${h()?'class="hide"':""}>\n          <div id="side-bar">\n            <div class="notice">\n              <iframe id="notice-frame" frameborder="0"></iframe>\n            </div>\n            \x3c!--<div class="support">TODO 支持区域</div>--\x3e\n            <div class="donate">\n              <p>微信扫一扫赞赏作者(扫不出来请点击图片后扫大图)：</p>\n              <a href="${internalUrls.zanshang}" target="_blank"><img title="点击查看大图" alt="点击查看大图" id="zanshang" src="${internalUrls.zanshang}"/></a>\n            </div>\n          </div>\n          <div id="main">\n            <h1 style="margin-top: 0;">B站下载助手</h1>\n            <div class="settings">\n              <div class="setting-item">\n                <span class="label">清晰度：</span>\n                <span>请在页面中B站自己的播放器内切换清晰度</span>\n              </div>\n              <div class="setting-item">\n                <span class="label">下载模式：</span>\n                <label><input id="setting-download-mode-advanced" checked name="setting-download-mode" type="radio"/> 高级</label>\n                <label><input id="setting-download-mode-normal" name="setting-download-mode" type="radio"/> 兼容</label>\n                <p class="desc">高级模式支持自动重命名和合并下载，但会占用非常大的系统运行内存<br/>兼容模式直接使用浏览器的默认下载，资源占用很小，但不支持自动重命名和合并下载</p>\n                <p class="desc">建议系统运行内存小于16G的用户使用兼容模式，下载后可以点<a href="http://csser.top/bilibili/merge.html" target="_blank">这里</a>尝试手动合并</p>\n              </div>\n              <div class="setting-item" id="setting-advanced">\n                <span class="label">合并下载：</span>\n                <label><input id="setting-merge-on" checked name="setting-merge" type="radio"> 开</label>\n                <label><input id="setting-merge-off" name="setting-merge" type="radio"> 关</label>\n                <p class="desc">高级模式下载过程中请<strong style="color: red;">不要</strong>刷新或关闭页面，也<strong style="color: red;">不要</strong>切换分集和清晰度</p>\n              </div>\n            </div>\n            <h3 id="title">${a?"加载中"+r:u(t,n,e,i)}</h3>\n            <ul id="durls">\n              ${a?"":f(n,t,e)}\n            </ul>\n            <div class="beg">\n              <p>\n                如果这个工具确实帮到了您，烦请在Chrome商店给个五星好评，谢谢😊\n                <a class="btn" href="https://chrome.google.com/webstore/detail/bfcbfobhcjbkilcbehlnlchiinokiijp/reviews" target="_blank">去评价</a>\n              </p>\n            </div>\n          </div>\n          <div id="actions">\n            <button id="toggle" class="btn-large">${h()?"打开B站下载助手":"收起"}</button>\n          </div>\n        </div>\n      `,(e=>{const t=e.getElementById("setting-download-mode-advanced"),n=e.getElementById("setting-download-mode-normal"),i=e.getElementById("setting-merge-on"),a=e.getElementById("setting-merge-off"),o=e.getElementById("setting-advanced"),s=e.getElementById("durls"),r=e.getElementById("toggle"),l=e.getElementById("actions"),d=e.getElementById("content"),c=document.getElementById("bilibili-helper-host"),m=()=>{t.disabled=!0,n.disabled=!0,i.disabled=!0,a.disabled=!0},u=()=>{t.disabled=!1,n.disabled=!1,i.disabled=!1,a.disabled=!1};g()?(t.checked=!0,n.checked=!1,o.style.display="block"):(t.checked=!1,n.checked=!0,o.style.display="none"),p()?(i.checked=!0,a.checked=!1):(i.checked=!1,a.checked=!0);const f=()=>{e.buildDownloadLinks()};t.addEventListener("change",()=>{t.checked?(localStorage.bilibili_helper_download_mode="advanced",o.style.display="block"):(localStorage.bilibili_helper_download_mode="normal",o.style.display="none"),f()}),n.addEventListener("change",()=>{n.checked?(localStorage.bilibili_helper_download_mode="normal",o.style.display="none"):(localStorage.bilibili_helper_download_mode="advanced",o.style.display="block"),f()}),i.addEventListener("change",()=>{localStorage.bilibili_helper_merge_mode=i.checked?"on":"off",f()}),a.addEventListener("change",()=>{localStorage.bilibili_helper_merge_mode=a.checked?"off":"on",f()}),s.addEventListener("click",t=>{const n=t.target;if("a"===n.tagName.toLowerCase()&&"advanced"===n.getAttribute("mode")){if(t.preventDefault(),t.stopPropagation(),n.classList.contains("disabled"))return;let i=null;const a=n.getAttribute("title");"on"===n.getAttribute("merge")?(i=e.querySelector(`ul[durls="${n.getAttribute("durls")}"]`),m(),x(n,JSON.parse(decodeURIComponent(n.getAttribute("durls"))),a,i).then(u)):(i=e.querySelector(`span[durl="${n.getAttribute("durl")}"]`),m(),v(n,JSON.parse(decodeURIComponent(n.getAttribute("durl"))),a,i).then(u))}}),r.addEventListener("click",()=>{h()?(localStorage.bilibili_helper_show="show",d.classList.remove("hide"),r.innerHTML="收起",c.classList.remove("hide"),l.style.top="0",e.getElementById("notice-frame").contentWindow.postMessage({action:"getHeight"},"https://csser.top")):(localStorage.bilibili_helper_show="hide",d.classList.add("hide"),c.classList.add("hide"),r.innerHTML="打开B站下载助手",l.style.top="0")}),c.addEventListener("scroll",()=>{l.style.top=c.scrollTop+"px"})})(s),(e=>{const t=e.getElementById("notice-frame");t.onload=(()=>{t.contentWindow.postMessage({action:"getHeight"},"https://csser.top"),t.contentWindow.postMessage({action:"setVersion",version:{name:manifest.version,code:parseInt(manifest.version.replace(/\./g,""),10)}},"https://csser.top"),t.contentWindow.postMessage({action:"setTheme",theme:"null"},"https://csser.top")}),window.addEventListener("message",e=>{if("https://csser.top"===e.origin&&e.data&&"reportHeight"===e.data.action&&(t.style.height=e.data.height+10+"px"),"https://csser.top"===e.origin&&e.data&&"showBilibilihelperindooorsmanNoticeDialog"===e.data.action){const t=e.data.notices;t&&t.length>0&&t.forEach(e=>{})}}),t.src=`https://csser.top/bilibili/notice.html?t=${Date.now()}`,window.addEventListener("resize",()=>{t.contentWindow.postMessage({action:"getHeight"},"https://csser.top")})})(s)),s.buildDownloadLinks=(()=>{s.getElementById("durls").innerHTML=f(n,t,e)})},y=(e,t)=>{const n=new Blob([e],{type:"application/octet-stream"}),i=document.createElement("a");i.setAttribute("href",URL.createObjectURL(n)),i.setAttribute("download",t),i.setAttribute("style","position:absolute;top:-9999px;"),document.body.appendChild(i);const a=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});i.dispatchEvent(a),setTimeout(()=>{document.body.removeChild(i)},1e3)},w=(e,t,n)=>{let i=null;return fetch(e).then(e=>{const a=e.headers.get("content-length"),o=t||parseInt(a,10);let s=0;return i=setInterval(()=>{n(s,o)},1e3),new Response(new ReadableStream({start(t){const n=e.body.getReader(),i=()=>{n.read().then(({done:e,value:n})=>{e?t.close():(s+=n.byteLength,t.enqueue(n),i())}).catch(e=>{t.error(e)})};i()}}))}).then(e=>e.blob()).finally(()=>{i&&clearInterval(i)})},v=(e,{url:t,size:n},i,a)=>(e.classList.add("disabled"),w(t,n,(e,t)=>{const n=Math.ceil(e/t*100);a.innerHTML=` 正在下载 - ${e}/${t} - ${n}%`}).then(e=>{a.innerHTML=" 已下载完成";const n=new URL(t).pathname.toLowerCase().match(/\.[a-z0-9]+?$/)[0];y(e,i+n)}).finally(()=>{e.classList.remove("disabled")})),x=(e,t,n,i)=>{if(1===t.length)return v(e,t[0],n,i);e.classList.add("disabled");const a=t.map(({url:e,size:t},n)=>{const a=document.createElement("li");return a.innerHTML=`分段${n+1} (${m(t)}) 正在下载`,i.appendChild(a),w(e,t,(e,i)=>{const o=Math.ceil(e/i*100);a.innerHTML=`分段${n+1} (${m(t)}) 正在下载 - ${e}/${i} - ${o}%`}).then(e=>(a.innerHTML=`分段${n+1} (${m(t)}) 已下载完成，等待合并`,e))});return Promise.all(a).then(async e=>{const t=await o.mergeBlobs(Array.from(e));y(t,n+".flv"),i.innerHTML="已完成"}).finally(()=>{e.classList.remove("disabled")})},_=async()=>{if(!e())return;b({loading:!0});const i=await(()=>fetch(window.location.href,r).then(e=>e.text()).then(e=>{const t=e.match(/<script>window.__INITIAL_STATE__=(.+?)<\/script>/);return t&&t[1]?JSON.parse(t[1].replace(";(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());","")):{code:-2,message:"获取视频信息失败，可以尝试清除浏览器cookies和缓存后重试，如多次重试仍然报错，请通过邮箱或QQ群反馈给我，谢谢"}}).catch(()=>l()))();if(i.code)return b(i);let a=localStorage.bilibili_player_settings&&+JSON.parse(localStorage.bilibili_player_settings).setting_config.defquality||112;if(t()){const e=i.videoData.aid;let t,n,o=i.videoData.cid;if(i.videoData.pages.length>1){const e=location.search.match(/p=(\d+)/);let a=i.videoData.pages[0];e&&e[1]&&(a=i.videoData.pages.find(t=>""+t.page==""+e[1])),t=a.page,n=a.part,o=a.cid}const{code:s,durls:c,qualityDescription:g,message:p}=await((e,t,n=112)=>{return fetch(`//api.bilibili.com/x/player/playurl?cid=${t}&avid=${e}&otype=json&qn=${n}`,r).then(e=>e.json()).then(e=>0!==e.code?d(e):d(e.data)).catch(()=>l())})(e,o,a);if(0===s){let e=`[${g}] ${i.videoData.title}`;t&&n&&(e=`[${g}] ${i.videoData.title}_P${t}_${n}`),b({code:s,title:e,durls:c,message:p})}else b({code:s,message:p})}if(n()){const e=i.epList;let t=-1===i.epId?e[e.length-1].ep_id:i.epId,n=e.find(e=>t===e.ep_id);const o=await s(".episode-item.on"),c=await s(".ep-item.cursor");if(o||c){const i=o||c,a=i.parentElement;let r=Array.from(a.querySelectorAll("li")).findIndex(e=>e===i);const l=await s("#eplist_module .ep-list-progress");l&&(r=+l.textContent.match(/(\d+)\/\d+/)[1]-1),n=e[r],t=n.ep_id||n.id}const{code:g,durls:p,qualityDescription:h,message:m}=await((e,t=112)=>{return fetch(`//api.bilibili.com/pgc/player/web/playurl/?ep_id=${e}&qn=${t}&bsource=`,r).then(e=>e.json()).then(e=>0!==e.code?d(e):d(e.result)).catch(()=>l())})(t,a);if(0===g){const e=`[${h}] ${i.mediaInfo.title}_${n.index||n.title}_${n.index_title||n.longTitle}`;b({code:g,title:e,durls:p,message:m})}else b({code:g,message:m})}};_();let $=""+window.location.href,L=""+localStorage.bilibili_player_settings;setInterval(()=>{const e=window.location.href,t=localStorage.bilibili_player_settings;if($!==e&&($=e,_()),L!==t)try{if(JSON.parse(t).setting_config.defquality===JSON.parse(L).setting_config.defquality)return;L=t,_()}catch(e){}},1e3)})();</script></head>
<body>
<div align="center">
<table width="100%" border="0">
<tbody><tr valign="top">
<td align="left" width="25%">
  <span class="tiny"><a href="http://www.cse.unsw.edu.au/~cs3311">COMP3311 19s1</a></span>
</td>
<td align="center" width="50%">
  <span class="heading">Prac Exercise 05</span><br>
  <span class="subheading">PLpgSQL, User-Defined Aggregates</span>
</td>
<td align="right" width="25%">
  <span class="tiny"><a href="http://www.cse.unsw.edu.au/~cs3311">Database Systems</a></span>
</td>
</tr></tbody></table>
</div><!--
<div style="text-align:center;font-size:80%;color:#555555;margin-top:5px;">
Last updated: <b>Monday 11th March 7:06pm</b> <br>
Most recent changes are shown in <span class="red">red</span> ...
older changes are shown in <span class="brown">brown</span>. <br>
</div>-->

<h3>Aims</h3>

<p>
This exercise aims to give you practice in:
</p>
<ul>
<li> defining views based on simple SQL queries
</li><li> defining SQL functions
</li><li> defining PLpgSQL functions
</li><li> adding new aggregate operators
</li></ul>
<p>
This exercise will not explain how to do everything in fine detail.
Part of the aim of the exercise is that you explore how to use the
PostgreSQL system.
A very important tool for this is the
<a href="https://www.postgresql.org/docs/current/static/index.html">PostgreSQL Documentation</a>.
In particular, the following sections of the Documentation are relevant:
</p><ul>
<li>the SQL 
<a href="https://www.postgresql.org/docs/current/static/xfunc-sql.html"><code>CREATE FUNCTION</code></a>
statement;
</li>
<li>
the SQL 
<a href="https://www.postgresql.org/docs/current/static/sql-createaggregate.html"><code>CREATE AGGREGATE</code></a>
statement;
</li>
<li>
the 
<a href="https://www.postgresql.org/docs/current/static/plpgsql.html">PLpgSQL</a>
language description.
</li>
</ul>
<p></p>

<h3>Background</h3>

<p>
Consider an on-line beer rating system which describes beers, breweries,
tasters, ratings, etc.
Tasters are the users of the system who provide ratings of various beers.
Each beer is brewed according to a particular style, by a given brewery.
Since we are interested in the location of tasters and brewers, we maintain
a collection of locations which is shared between the two.
Ratings are based on simple 1..5 numerical scale (5 means <q>world classic</q> and
1 means <q>barely drinkable</q>).
</p>
<p>
A possible ER design for this scenario is as follows:
</p>
<br><center> <img src="./19s1 - Prac Exercise 05_files/schema.png"> </center><br>
<p>
Note that the E/R design includes numeric primary key
attributes (the ones called <code>id</code>) to allow for the fact
that names might clash. Using such attributes also simplifies the
derived relational model, by allowing all foreign keys to be
represented by a single attribute.
</p>
<p>
A relational schema corresponding to this E/R design is available
in the file
</p>
<pre><a href="https://www.cse.unsw.edu.au/~cs3311/19s1/pracs/05/schema.sql">/home/cs3311/web/19s1/pracs/05/schema.sql</a>
</pre>
<p>
A file containing populated tables for this schema is available in
the file
</p>
<pre><a href="https://www.cse.unsw.edu.au/~cs3311/19s1/pracs/05/data.sql">/home/cs3311/web/19s1/pracs/05/data.sql</a>
</pre>
<p>
Note that the <code>data.sql</code> file is using PostgrSQL's bulk
loading mechanism <code>COPY</code>; check the PostgreSQL manual
for details on how this works.
The <code>COPY</code> statement is a part of PostgreSQL's SQL dialect,
and can only be used by the PostgreSQL super-user (which is you
when you're running your own server, as you are on Grieg).
Also, since the <code>id</code> attributes are serial primary keys,
they have an associated sequence, which needs to be set to the correct
value after the tuples are loaded (so that any new tuples will have
appropriate sequence values generated).
</p>
<p>
There is also a template file giving headers for the views, functions
and aggregates you need to write.
</p>
<pre><a href="https://www.cse.unsw.edu.au/~cs3311/19s1/pracs/05/prac.sql">/home/cs3311/web/19s1/pracs/05/prac.sql</a>
</pre>
<p>
Grab a copy of this file to save yourself some typing.
</p>
<p>
The relational model attempts to capture all of the semantics of the
E/R design.
However, there is one difference between the relational model and the
E/R design in that beer styles have been converted into entities. This
is primarily to ensure that all beer style information looks consistent
(e.g. we don't have some beers called <q>lager</q> and others called
<q>laager</q>).
</p>
<p>
You should create a new database called <q>beers</q> and load the schema
and data into this database. The following commands wil do this:
</p>
<pre>$ <b>createdb beers</b>
CREATE DATABASE
$ <b>psql beers -f /home/cs3311/web/19s1/pracs/05/schema.sql</b>
<i>... which will produce lots of NOTICE messages ...</i>
$ <b>psql beers -f /home/cs3311/web/19s1/pracs/05/data.sql</b>
<i>... which will produce messages about table ids ...</i>
</pre>
<p>
Once the schema and data are loaded, check that everything is in order
by running the following queries and seeing whether you get the same
results:
</p>
<pre>beers=# <b>select count(*) from Ratings;</b>
 count 
-------
    32
(1 row)

beers=# <b>select given from Taster order by given;</b>
 given  
--------
 Adam
 Geoff
 Hector
 Jeff
 John
 Peter
 Raghu
 Ramez
 Rose
 Sarah
(10 rows)
</pre>
<p>
If the database doesn't look correct, try to work out what went wrong
and then try to load the data correctly.
Once you're statisfied that the database is correct, continue with
the exercises.
</p>


<h3>Exercises</h3>

<p>
You might want to collect together all your view definitions in a file.
A <a href="https://cgi.cse.unsw.edu.au/~cs3311/19s1/pracs/05/prac.sql">template</a> is available for this, to save
some typing.
</p>

<ol>

<li class="q">
<p>
Find out who made what ratings.
</p>
<p>
If you look at the <code>Ratings</code> table, you'll see that it contains
just a bunch of numbers. This is good for being compact, but hard to work
out what it all means. Write an SQL query that will put together the data
from the <code>Ratings</code> table with the <code>Taster</code> and
<code>Beer</code> tables so that you get a better idea of who rated which
beer. The result should display the taster's name (given name only),
along with the name of the beer, its brewer and the rating.
Order the table by the tasters' names; for a given taster, sort in
descreasing order of rating (i.e. highest-rated beer first).
</p>
<p>
Place your query into a view definition like this:
</p>
<pre>create or replace view AllRatings(taster,beer,brewer,rating)
</pre>
<p>
Note that the attributes to the view definitions supply names for
whatever values appear in the <code>select</code> clause of the
SQL query. If you want to think of the view as a <q>virtual table</q>,
then these represent the names of the attributes of that table.
</p>
<p>
When you invoke the view, you should see output that looks like this:
</p>
<pre> taster |          beer          |          brewer          | rating 
--------+------------------------+--------------------------+--------
 Adam   | Old                    | Toohey's                 |      4
 Adam   | Victoria Bitter        | Carlton and United       |      1
 Adam   | New                    | Toohey's                 |      1
 Geoff  | Redback                | Matilda Bay Brewing      |      4
 Geoff  | James Squire Pilsener  | Maltshovel Brewery       |      4
 Geoff  | Empire                 | Carlton and United       |      3
 Hector | Sierra Nevada Pale Ale | Sierra Nevada            |      4
 Hector | Fosters                | Carlton and United       |      3
 Jeff   | Sierra Nevada Pale Ale | Sierra Nevada            |      4
 Jeff   | Burragorang Bock       | Scharer's Little Brewery |      3
 Jeff   | Rasputin               | North Coast Brewing      |      1
 John   | Sierra Nevada Pale Ale | Sierra Nevada            |      5
 John   | 80/-                   | Calendonian Brewing      |      4
 John   | Rasputin               | North Coast Brewing      |      4
 John   | Empire                 | Carlton and United       |      3
 John   | Chimay Red             | Chimay                   |      3
 John   | Crown Lager            | Carlton and United       |      2
 John   | Victoria Bitter        | Carlton and United       |      1
 Peter  | XXXX                   | Castlemaine/Perkins      |      5
 Raghu  | Old Tire               | New Glarus Brewing       |      5
 Raghu  | Sierra Nevada Pale Ale | Sierra Nevada            |      3
 Raghu  | Rasputin               | North Coast Brewing      |      3
 Ramez  | Sierra Nevada Pale Ale | Sierra Nevada            |      4
 Ramez  | Bigfoot Barley Wine    | Sierra Nevada            |      3
 Rose   | Redback                | Matilda Bay Brewing      |      5
 Sarah  | Burragorang Bock       | Scharer's Little Brewery |      4
 Sarah  | James Squire Amber Ale | Maltshovel Brewery       |      3
 Sarah  | James Squire Pilsener  | Maltshovel Brewery       |      3
 Sarah  | Old                    | Toohey's                 |      3
 Sarah  | Scharer's Lager        | Scharer's Little Brewery |      3
 Sarah  | New                    | Toohey's                 |      2
 Sarah  | Victoria Bitter        | Carlton and United       |      1
(32 rows)

</pre>


</li><li class="q">
<p>
Find out what is my favourite beer.
</p>
<p>
Clearly, you can work out the answer to this once you've solved the query
above. However, try to write a query that returns a single tuple with
the name of the beer(s) and brewer(s) for the beer(s) that John Shepherd
rates highest.
</p>
<p>
Place your query into a view definition like this:
</p>
<pre>create or replace view JohnsFavouriteBeer(brewer,beer)
</pre>
<p>
When you invoke the view, you should see output that looks like this:
</p>
<pre>beers=# <b>select * from JohnsFavouriteBeer ;</b>
    brewer     |   beer   
---------------+----------
 Sierra Nevada | Pale Ale
(1 row)
</pre>
<p>
(Hint: adapt the view from the previous question in defining this new view)
</p>


</li><li class="q">
<p>
Find out anyone's favourite beer.
</p>
<p>
The above view seems to provide a useful operation, but seems a little
restrictive. Surely I don't always want to know what is John's favourite
beer. Maybe I want to know what is Adam's favourite beer, or Sarah's
favourite beer. The queries to do this would be almost the same as the
one used in the view above, but with the name changed. Which naturally
raises the question <q>Can view definitions be parameterised?</q>. The
answer is <q>No</q> in standard SQL, but PostgreSQL provides functions,
which can be used to implement something like this.
</p>
<p>
PostgreSQL functions can be defined in a number of languages, including
SQL. An SQL function typically contains a single SQL query, into which
parameters to the function can be interpolated, thus providing a
parameterisable query. (Note that SQL functions can contain an arbitrary
sequence of SQL statements, including updates, separated by semi-colons.
The result of such a function is the the result of the last SQL statement.)
</p>
<p>
For the favourite beer example, define a function which takes as input
the complete name of a taster (as a text string) and returns one or more
tuples containing the name of the brewer and the beer, as in the above
example.
</p>
<p>
Why "one or more tuples"? Maybe I have several equally favourite beers.
Always consider this possibility when faced with an information request
like "Find the largest ..." or "Find the most expensive ..."; there may be
a number of equally large/expensive things in the database. Also, do not
assume that a given taster's maximum rating will be equal to 5; there may
be people who rate beers harshly and never give a better rating than 4.
</p>
<p>
Make sure that you test your function on all tasters, to ensure that it's
working properly for the people who have several equal favourite beers, or
those who haven't given a rating of 5.
</p>
<p>
Before we can define a function, we need to define a type for the return
tuples. Note that this happens automatically for views, but not for
functions. The tuple type can be defined as:
</p>
<pre>create type BeerInfo as (brewer text, beer text);
</pre>
<p>
The function would then be defined like this:
</p>
<pre>create or replace function FavouriteBeer(taster text) returns set of BeerInfo
</pre>
<p>
and could be used as follows:
</p>
<pre>beers=# <b>select * from FavouriteBeer('John Shepherd');</b>
    brewer     |   beer   
---------------+----------
 Sierra Nevada | Pale Ale
(1 row)

beers=# <b>select * from FavouriteBeer('Adam Wiggins');</b>
  brewer  | beer 
----------+------
 Toohey's | Old
(1 row)
</pre>
<p>
Note that since the function returns a set of tuples, it can be treated
like a dynamic table (somewhat like a view) and needs to be used in the
context where a table would normally be used, i.e. in the <tt>from</tt>
clause of a <tt>select</tt> statement. In fact, you can use such a
function in the <tt>select</tt> clause, and it gives a plausible result;
try it out and see if you can explain what PostgreSQL is doing, e.g.
</p>
<pre>beers=# <b>select FavouriteBeer('John Shepherd');</b>
</pre>
<p>
Some things to note about SQL function definitions:
</p><ul>
<li> the body of every PostgreSQL function (including SQL functions) is
	defined as a single long string, wrapped in unusual quotes
	<tt>$$ ... $$</tt>.
	Because of their unusual quoting, they are different from other
	strings in PostgreSQL in that embedded single quotes do
	<em>not</em> need to be doubled.
</li>
<li> we have given a name to the parameter of the function, but within
	the function body, this name may not be used; in SQL functions,
	parameters must be referred to via positional notation <tt>$1</tt>,
	<tt>$2</tt>, etc. (named parameters may, however, be used in other
	kinds of functions e.g. plpgsql ones)
</li>
<li> an SQL function consists of a single SQL statement, similar to a view;
	unlike a view, the function has parameters and the SQL statement may
	refer to these parameters (using positional notation)
</li>
</ul>
<p></p>

</li><li class="q">
<p>
What style is that beer?
</p>
<p>
Sometimes beers are named after their style (e.g. Sierra Nevada Pale Ale).
Other times, imaginitive names are used (e.g. Rooftop Red, Old Peculier).
For these latter ones, we may know the name and want to discover what the
style is.
Write an SQL function that takes two text string arguments (the name of a
brewer and the name of a beer) and returns the text string giving the
style of the beer).
The function should be defined as:
</p>
<pre> create or replace function BeerStyle(brewer text, beer text) returns text
</pre>
<p>
and used as e.g.
</p>
<pre>beers=# <b>select BeerStyle('Sierra Nevada','Pale Ale');</b>
 beerstyle 
-----------
 Pale Ale
(1 row)
</pre>
<p>
The function should give the correct result, regardless of the text case
of the input parameters, so the following query should also work:
</p>
<pre>beers=# <b>select BeerStyle('sierra nevada','pale ale');</b>
 beerstyle 
-----------
 Pale Ale
(1 row)
</pre>
<p>
However, spelling mistakes or unknown names, will cause a null result to
be returned, e.g.
</p>
<pre>beers=# <b>select BeerStyle('sieera nevada','pale ale');</b>
 beerstyle 
-----------
 
(1 row)
</pre>

</li><li class="q">
<p>
Consider the following PostgreSQL SQL function to produce
a representation of a taster's address:
</p>
<pre>create or replace function TasterAddress(text) returns text
as $$
   select loc.state||', '||loc.country
   from   Taster t, Location loc
   where  t.given = $1 and t.livesIn = loc.id
$$ language sql;
</pre>
<p>
This function would be used as follows:
</p>
<pre>beers=# <b>select tasterAddress('John');</b>
       tasteraddress        
----------------------------
 New South Wales, Australia
(1 row)

beers=# <b>select tasterAddress('Jeff');</b>
   tasteraddress    
--------------------
 California, U.S.A.
(1 row)
</pre>
<p>
The function works ok for people who have both a state and a
country, but fails for people who have just a country specified;
it gives a null address, when clearly some address information is known.
To observe the bug, try to find Sarah's address.
Modify the function so that it produces a sensible result when either
the country or the state is null.
Once you've fixed this bug, you ought to be able to get a result like:
</p>
<pre>beers=# <b>select tasterAddress('Sarah');</b>
 tasteraddress 
---------------
 England
(1 row)
</pre>
<p>
Hint: take a look at the 
<a href="https://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-CASE">case</a> construct and the
<a href="https://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL">coalesce()</a> function.
</p>

</li><li class="q">
<p>
Define a function that produces a summary of beer tasting.
</p>
<p>
The function <code>BeerSummary</code> returns a summary for each beer
consisting of
the name of the beer,
followed by its average rating (to 1 decimal place),
followed by a comma-separated list of the given names
of the people who tasted and rated the beer.
</p>
<p>
Use the following header in defining the function:
</p>
<pre>create or replace function BeerSummary() returns text
</pre>
<p>
The function should produce the following results on the example database:
</p>
<pre>beers=# <b>select BeerSummary();</b>
            beersummary                
-------------------------------------------
 
 Beer:    80/-
 Rating:  4.0
 Tasters: John
 
 Beer:    Bigfoot Barley Wine
 Rating:  3.0
 Tasters: Ramez
 
 Beer:    Burragorang Bock
 Rating:  3.0
 Tasters: Jeff, Sarah
 
 Beer:    Chimay Red
 Rating:  3.0
 Tasters: John
 
 <span class="green">... a bunch of text omitted here to save space ...</span>
 
 Beer:    Sierra Nevada Pale Ale
 Rating:  4.0
 Tasters: Hector, Jeff, John, Raghu, Ramez
 
 Beer:    Victoria Bitter
 Rating:  1.0
 Tasters: Adam, John, Sarah
 
 Beer:    XXXX
 Rating:  5.0
 Tasters: Peter
 
(1 row)
</pre>
<p>
You should make use of the <code>AllRatings</code> view
in producing the summary.
You should <b>not</b> make use of the <code>concat()</code> aggregate
in this function; note that <code>concat()</code> produces the taster
list in a different format to that given above (i.e. <code>concat()</code>
doesn't put spaces after the commas in its taster lists).
</p>

</li><li class="q">
<p>
Define a new aggregation operator to concatenate a column of strings.
</p>
<p>
Define the aggregation operator as follows:
</p>
<pre>create aggregate concat ( ... )
</pre>
You could use this operator to get a list of taster names as follows:
<p></p>
<pre>beers=# <b>select concat(given) from Taster ;</b>

                      concat                          
----------------------------------------------------------
 John,Adam,Jeff,Sarah,Raghu,Ramez,Hector,Geoff,Peter,Rose
(1 row)
</pre>

</li><li class="q">
<p>
Define a view that produces a summary of beer tasting.
</p>
<p>
The view should return a set of tuples where each tuple contains
the name of the beer, the average rating (to 1 decimal place),
and a comma-separated list of the given names of people who tasted
and rated the beer.
</p>
<p>
Use the following header in defining the view:
</p>
<pre>create or replace view BeerSummary(beer,rating,tasters)
</pre>
The view should produce the following results on the example database:
<p></p>
<pre>beers=# <b>select * from BeerSummary;</b>
          beer          | rating |           tasters            
------------------------+--------+------------------------------
 Redback                |  4.5   | Geoff,Rose
 Fosters                |  3.0   | Hector
 New                    |  1.5   | Adam,Sarah
 Empire                 |  3.0   | Geoff,John
 Old Tire               |  5.0   | Raghu
 Old                    |  3.5   | Adam,Sarah
 80/-                   |  4.0   | John
 Chimay Red             |  3.0   | John
 Crown Lager            |  2.0   | John
 James Squire Amber Ale |  3.0   | Sarah
 Sierra Nevada Pale Ale |  4.0   | Hector,Jeff,John,Raghu,Ramez
 Rasputin               |  2.7   | Jeff,John,Raghu
 Burragorang Bock       |  3.5   | Jeff,Sarah
 XXXX                   |  5.0   | Peter
 Scharer's Lager        |  3.0   | Sarah
 Bigfoot Barley Wine    |  3.0   | Ramez
 Victoria Bitter        |  1.0   | Adam,John,Sarah
 James Squire Pilsener  |  3.5   | Geoff,Sarah
(18 rows)
</pre>
<p>
You should make use of the <code>AllRatings</code> view
in producing the summary.
</p>

</li></ol>

<a href="https://cgi.cse.unsw.edu.au/~cs3311/19s1/pracs/05/soln.sql">[Sample Solutions]</a>



</body></html>